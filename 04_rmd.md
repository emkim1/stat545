---
title: "04 R Markdwon"
author: "Emily Kim"
date: "2025-01-23"
output: 
  html_document: 
    toc: true
    theme: united
    keep_md: true
    number_sections: true
---



## STAT 545 Episode 3A: Reproducible Reports with R Markdown
https://www.youtube.com/watch?v=ZzDSkBgt9xQ

Dynamic reports using RStudio  

1) Write text in _Markdown_  
Write a blueprint in plain text that includes everything.   
Instruct how to format your text: a YAML header to specify settings for the document  
`Preview` renders the plain text into HTML, or other outputs   

2) Don't modify your output (only for reading)
Two versions of your work:  blueprint and rendered document. 

3) Interlace code and text with _R Markdown_  
R code is in code chunks. Specify options for each code chunk. 
Write your discussion as Markdown, outside the code chunks
Explain the logic behind the code, to help a reader understand
`Knit` the components (code, formatting, text) to render the document into HTML, or other outputs

## Lecture Notes: Authoring and Reproducibility
https://stat545.stat.ubc.ca/notes/notes-a03/  

Learning Objectives  

* Use basic markdown features. 
* Write documents in markdown.  
* Choose whether html or pdf is an appropriate output.  
* Style an Rmd document by editing the YAML header.  
* Customize code chunk output using Rmd code chunk.  
* Render your finalized document to HTML & PDF.  

## R Markdown Tutorial from RStudio
https://rmarkdown.rstudio.com/lesson-1.html  

Read: Intro, How It Works, Code Chunks, Inline Code. 

R Markdown is an authoring framework for data science. 

* Connect to data  
* Save & run code   
* Generate reports (html, pdf, Word, ioslides, dashboard, notebook, book, website, shiny app)   

R Markdown files contain 3 types of content. 

* YAML header to guide the build process  
* Text to display  
* Code chunks to run: R, python, SQL     

Insert Code Chunks:  

* `Cmd + Option I` to insert code chunks
* +C Add Chunk in toolbar 

Chunk Options: set arguments in chunk header `{}`
Render using the `Knit` button  

* `include` = FALSE prevent code and results from appearing in output  
* `echo` = FALSE prevents code, but not the results from appearing in output. A useful way to embed figures.
* `message` = FALSE prevents messages that are generated by code from appearing in output  
* `warning` = FALSE prevents warnings that are generated by code from appearing in output  
* `fig.cap = "..."` add a caption to graphical results.  

Global Options
Apply options to every chunk in your file with `knitr::opts_chunk$set` in a code chunk. 
This global default that can be overwritten in individual chunk headers.  

Inline Code
Insert code into text by enclosing the code with `r `  

## Cheat sheets from simple to loaded  
[Simple markdown cheat sheet](https://enterprise.github.com/downloads/en/markdown-cheatsheet.pdf)
[YAML headers options](https://bookdown.org/yihui/rmarkdown/html-document.html)
[R Markdown cheat sheet](https://github.com/rstudio/cheatsheets/blob/main/rmarkdown-2.0.pdf)
R Markdown reference guide from RStudio:  RStudio > Help > Cheatsheets  

## Markdown online tutorial
https://www.markdowntutorial.com/

Markdown is "plaintext" used to write content for the web.   
Markdown is the standard for academics, scientists, writers, as well as websites like GitHub and reddit.   

Fonts  
`_italic_`  
`**bold**`  
`**_bold and italic_**`  

Headers  
Preface with hash mark `#` for large, `######` for small. 
In general, use headers two - five  

Links  
Inline: `[text](link)`  
Reference: link is like a footnote, link multiple times, just update a single reference link 
Want to [see something fun][a fun place]?  
I have [the website for you][another fun place]!  
[a fun place]: www.zombo.com  
[another fun place]: www.stumbleupon.com  

Images  
Like Links, but preface with `!`  
Inline image link: `![text][link]`   
Inline image link: `![The founding father][Father]`  
[Father]: http://octodex.github.com/images/founding-father.jpg

Blockquotes  
Preface a line with `>`

List, Bullet 

* Milk  
* Eggs  
* Butter.  

List, Numbered
1. Crack the eggs  
2. Pour in the milk 
3. Add the butter

Sublists  

* Tintin  
  * A reporter  
  * orange haired   

* Haddock   
  * sea captain  
  * loves whiskey   
    * also scotch
  
_Soft break_ with 2 spaces, to format paragraphs in lists. 


## Troubleshooting  
https://happygitwithr.com/rmd-test-drive.html#rmd-troubleshooting

Check whether RStudio, rmarkdown and dependencies versions are up-to-date.  
* Update RStudio every 1-2 months:  `RStudio > About RStudio`      
* Update R 1-2x / year, last major change in April 2020 with 4.0.0:  `R.version.string`  
Stay < 1 minor version behind, else pre-built binary add-on packages from CRAN not install   
* rmarkdown:  check version `packageVersion("rmarkdown")` 

.Rprofile 

* Something with knitr, markdown, rmarkdown, RStudio may interfere with installation or usage.
* Comment the whole file out or rename it and relaunch or even re-install RStudio

Dumped a bunch of code in, now Rmd does not render  

1) back out of changes, get to a functional state, restore changes gradually  
Run code interactively. render the entire document frequently, commit after each successful addition  
When you re-introduce the broken code, it will be a small change. Easier to find and fix the root problem.  

2) Knit despite errors. 

Accept global errors:

Specify for a specific chunk:

``` r
## your sketchy code goes here ;)
```
3) Bisect strategy  
Put knitr::knit_exit() early in your .Rmd document, either in inline R code or in a chunk. Move it earlier until things work. Now move it down in the document. Eventually you narrow down the location of your broken code, find the line(s) and fix it.

4) Check your working directory  

* What is the working directory?  
`getwd()` in the R chunk to display at run time  
* Is that file I want to read/write actually where I think it is?  
`list.files()` lists files in working directory

5) the here package to build file paths for sub-directories  
https://github.com/jennybc/here_here


https://stat545.com/r-markdown.html  


